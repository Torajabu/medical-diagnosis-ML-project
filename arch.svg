<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients -->
    <linearGradient id="inputGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#81C784;stop-opacity:0.8" />
    </linearGradient>
    <linearGradient id="processGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2196F3;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#64B5F6;stop-opacity:0.8" />
    </linearGradient>
    <linearGradient id="outputGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9800;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#FFB74D;stop-opacity:0.8" />
    </linearGradient>
    <linearGradient id="modelGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#9C27B0;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#BA68C8;stop-opacity:0.8" />
    </linearGradient>
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
     refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="900" fill="#f8f9fa" stroke="#e9ecef" stroke-width="2"/>

  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" fill="#212529" font-size="28" font-weight="bold" font-family="Arial, sans-serif">
    Medical Diagnosis ML Project - Data Flow Diagram &amp; System Architecture
  </text>

  <!-- Technology Stack Section -->
  <g id="tech-stack">
    <rect x="50" y="70" width="300" height="120" fill="#fff" stroke="#dee2e6" stroke-width="2" rx="8"/>
    <text x="200" y="95" text-anchor="middle" fill="#495057" font-size="16" font-weight="bold">Technology Stack</text>
    
    <!-- Tech badges -->
    <rect x="70" y="105" width="60" height="25" fill="#3776ab" rx="4"/>
    <text x="100" y="122" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Python</text>
    
    <rect x="140" y="105" width="70" height="25" fill="#ff6b35" rx="4"/>
    <text x="175" y="122" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Streamlit</text>
    
    <rect x="220" y="105" width="80" height="25" fill="#f7931e" rx="4"/>
    <text x="260" y="122" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Scikit-learn</text>
    
    <rect x="70" y="140" width="50" height="25" fill="#150458" rx="4"/>
    <text x="95" y="157" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Pandas</text>
    
    <rect x="130" y="140" width="50" height="25" fill="#013243" rx="4"/>
    <text x="155" y="157" text-anchor="middle" fill="white" font-size="12" font-weight="bold">NumPy</text>
    
    <rect x="190" y="140" width="50" height="25" fill="#306998" rx="4"/>
    <text x="215" y="157" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Joblib</text>
    
    <rect x="250" y="140" width="50" height="25" fill="#e97627" rx="4"/>
    <text x="275" y="157" text-anchor="middle" fill="white" font-size="12" font-weight="bold">SMOTE</text>
  </g>

  <!-- Step 1: Data Generation -->
  <g id="step1">
    <rect x="50" y="220" width="200" height="80" fill="url(#inputGradient)" stroke="#4CAF50" stroke-width="2" rx="8"/>
    <text x="150" y="245" text-anchor="middle" fill="#1B5E20" font-size="14" font-weight="bold">Step 1: Data Generation</text>
    <text x="150" y="265" text-anchor="middle" fill="#2E7D32" font-size="12">create_data.py</text>
    <text x="150" y="280" text-anchor="middle" fill="#2E7D32" font-size="11">Synthetic Medical Records</text>
    <text x="150" y="295" text-anchor="middle" fill="#2E7D32" font-size="11">Age, Gender, BP, Cholesterol, Sugar</text>
  </g>

  <!-- Step 2: Data Preprocessing -->
  <g id="step2">
    <rect x="300" y="220" width="180" height="80" fill="url(#processGradient)" stroke="#2196F3" stroke-width="2" rx="8"/>
    <text x="390" y="245" text-anchor="middle" fill="#0D47A1" font-size="14" font-weight="bold">Step 2: Preprocessing</text>
    <text x="390" y="265" text-anchor="middle" fill="#1565C0" font-size="12">SMOTE Balancing</text>
    <text x="390" y="280" text-anchor="middle" fill="#1565C0" font-size="11">Stratified Split (80/20)</text>
    <text x="390" y="295" text-anchor="middle" fill="#1565C0" font-size="11">Feature Scaling</text>
  </g>

  <!-- Data Storage -->
  <g id="data-storage">
    <rect x="520" y="220" width="140" height="80" fill="#fff" stroke="#6c757d" stroke-width="2" rx="8"/>
    <text x="590" y="245" text-anchor="middle" fill="#495057" font-size="14" font-weight="bold">Dataset Storage</text>
    <text x="590" y="265" text-anchor="middle" fill="#6c757d" font-size="12">medical_records.csv</text>
    <text x="590" y="280" text-anchor="middle" fill="#6c757d" font-size="11">Balanced Classes</text>
    <text x="590" y="295" text-anchor="middle" fill="#6c757d" font-size="11">Training Ready</text>
  </g>

  <!-- Step 3: Model Training -->
  <g id="step3">
    <rect x="50" y="340" width="280" height="120" fill="url(#modelGradient)" stroke="#9C27B0" stroke-width="2" rx="8"/>
    <text x="190" y="365" text-anchor="middle" fill="#4A148C" font-size="14" font-weight="bold">Step 3: Model Training (train_models.py)</text>
    
    <!-- Logistic Regression Model -->
    <rect x="70" y="380" width="110" height="70" fill="#fff" stroke="#7B1FA2" stroke-width="1.5" rx="4"/>
    <text x="125" y="400" text-anchor="middle" fill="#7B1FA2" font-size="12" font-weight="bold">Logistic Regression</text>
    <text x="125" y="415" text-anchor="middle" fill="#8E24AA" font-size="10">Linear Model</text>
    <text x="125" y="430" text-anchor="middle" fill="#8E24AA" font-size="10">Fast Training</text>
    <text x="125" y="445" text-anchor="middle" fill="#8E24AA" font-size="10">Interpretable</text>
    
    <!-- Random Forest Model -->
    <rect x="200" y="380" width="110" height="70" fill="#fff" stroke="#7B1FA2" stroke-width="1.5" rx="4"/>
    <text x="255" y="400" text-anchor="middle" fill="#7B1FA2" font-size="12" font-weight="bold">Random Forest</text>
    <text x="255" y="415" text-anchor="middle" fill="#8E24AA" font-size="10">Ensemble Method</text>
    <text x="255" y="430" text-anchor="middle" fill="#8E24AA" font-size="10">Non-linear</text>
    <text x="255" y="445" text-anchor="middle" fill="#8E24AA" font-size="10">Robust</text>
  </g>

  <!-- Model Persistence -->
  <g id="model-persistence">
    <rect x="380" y="340" width="140" height="120" fill="#fff" stroke="#6c757d" stroke-width="2" rx="8"/>
    <text x="450" y="365" text-anchor="middle" fill="#495057" font-size="14" font-weight="bold">Model Storage</text>
    
    <rect x="400" y="385" width="100" height="25" fill="#e9ecef" stroke="#adb5bd" rx="3"/>
    <text x="450" y="402" text-anchor="middle" fill="#495057" font-size="11">lr_model.pkl</text>
    
    <rect x="400" y="420" width="100" height="25" fill="#e9ecef" stroke="#adb5bd" rx="3"/>
    <text x="450" y="437" text-anchor="middle" fill="#495057" font-size="11">rf_model.pkl</text>
  </g>

  <!-- Step 4: Web Application -->
  <g id="step4">
    <rect x="570" y="340" width="200" height="120" fill="url(#processGradient)" stroke="#2196F3" stroke-width="2" rx="8"/>
    <text x="670" y="365" text-anchor="middle" fill="#0D47A1" font-size="14" font-weight="bold">Step 4: Web Application</text>
    <text x="670" y="385" text-anchor="middle" fill="#1565C0" font-size="12">streamlit_app.py</text>
    <text x="670" y="405" text-anchor="middle" fill="#1565C0" font-size="11">Interactive Dashboard</text>
    <text x="670" y="420" text-anchor="middle" fill="#1565C0" font-size="11">Real-time Sliders</text>
    <text x="670" y="435" text-anchor="middle" fill="#1565C0" font-size="11">Model Selection</text>
    <text x="670" y="450" text-anchor="middle" fill="#1565C0" font-size="11">localhost:8501</text>
  </g>

  <!-- User Input Section -->
  <g id="user-input">
    <rect x="820" y="220" width="200" height="240" fill="url(#inputGradient)" stroke="#4CAF50" stroke-width="2" rx="8"/>
    <text x="920" y="245" text-anchor="middle" fill="#1B5E20" font-size="14" font-weight="bold">User Input Parameters</text>
    
    <!-- Input fields -->
    <rect x="840" y="260" width="160" height="25" fill="#fff" stroke="#4CAF50" rx="3"/>
    <text x="920" y="277" text-anchor="middle" fill="#2E7D32" font-size="12">Age: 18-90 years</text>
    
    <rect x="840" y="295" width="160" height="25" fill="#fff" stroke="#4CAF50" rx="3"/>
    <text x="920" y="312" text-anchor="middle" fill="#2E7D32" font-size="12">Gender: Male/Female</text>
    
    <rect x="840" y="330" width="160" height="25" fill="#fff" stroke="#4CAF50" rx="3"/>
    <text x="920" y="347" text-anchor="middle" fill="#2E7D32" font-size="12">BP: 80-200 mmHg</text>
    
    <rect x="840" y="365" width="160" height="25" fill="#fff" stroke="#4CAF50" rx="3"/>
    <text x="920" y="382" text-anchor="middle" fill="#2E7D32" font-size="12">Cholesterol: 100-400</text>
    
    <rect x="840" y="400" width="160" height="25" fill="#fff" stroke="#4CAF50" rx="3"/>
    <text x="920" y="417" text-anchor="middle" fill="#2E7D32" font-size="12">Sugar: 50-300 mg/dL</text>
    
    <rect x="840" y="435" width="160" height="25" fill="#fff" stroke="#4CAF50" rx="3"/>
    <text x="920" y="452" text-anchor="middle" fill="#2E7D32" font-size="12">Model Selection</text>
  </g>

  <!-- Step 5: Prediction & Results -->
  <g id="step5">
    <rect x="1070" y="220" width="280" height="240" fill="url(#outputGradient)" stroke="#FF9800" stroke-width="2" rx="8"/>
    <text x="1210" y="245" text-anchor="middle" fill="#E65100" font-size="14" font-weight="bold">Step 5: Prediction &amp; Results</text>
    
    <!-- Risk Assessment -->
    <rect x="1090" y="265" width="240" height="40" fill="#fff" stroke="#FF9800" rx="4"/>
    <text x="1210" y="285" text-anchor="middle" fill="#F57C00" font-size="12" font-weight="bold">Disease Risk Assessment</text>
    <text x="1210" y="300" text-anchor="middle" fill="#FB8C00" font-size="11">High/Low Risk Classification</text>
    
    <!-- Confidence Score -->
    <rect x="1090" y="315" width="240" height="40" fill="#fff" stroke="#FF9800" rx="4"/>
    <text x="1210" y="335" text-anchor="middle" fill="#F57C00" font-size="12" font-weight="bold">Confidence Score</text>
    <text x="1210" y="350" text-anchor="middle" fill="#FB8C00" font-size="11">Prediction Probability (%)</text>
    
    <!-- Patient Summary -->
    <rect x="1090" y="365" width="240" height="40" fill="#fff" stroke="#FF9800" rx="4"/>
    <text x="1210" y="385" text-anchor="middle" fill="#F57C00" font-size="12" font-weight="bold">Patient Data Summary</text>
    <text x="1210" y="400" text-anchor="middle" fill="#FB8C00" font-size="11">Input Parameters Review</text>
    
    <!-- Medical Disclaimer -->
    <rect x="1090" y="415" width="240" height="35" fill="#ffebee" stroke="#f44336" rx="4"/>
    <text x="1210" y="435" text-anchor="middle" fill="#c62828" font-size="11" font-weight="bold">Medical Disclaimer</text>
    <text x="1210" y="448" text-anchor="middle" fill="#d32f2f" font-size="10">Educational Use Only</text>
  </g>

  <!-- Performance Metrics -->
  <g id="performance">
    <rect x="50" y="520" width="1300" height="100" fill="#fff" stroke="#dee2e6" stroke-width="2" rx="8"/>
    <text x="700" y="545" text-anchor="middle" fill="#495057" font-size="16" font-weight="bold">Performance Metrics &amp; System Capabilities</text>
    
    <!-- Metrics boxes -->
    <rect x="80" y="560" width="150" height="50" fill="#d4edda" stroke="#28a745" rx="4"/>
    <text x="155" y="580" text-anchor="middle" fill="#155724" font-size="12" font-weight="bold">Processing Time</text>
    <text x="155" y="595" text-anchor="middle" fill="#155724" font-size="11">Sub-second Response</text>
    
    <rect x="250" y="560" width="150" height="50" fill="#d1ecf1" stroke="#17a2b8" rx="4"/>
    <text x="325" y="580" text-anchor="middle" fill="#0c5460" font-size="12" font-weight="bold">Model Accuracy</text>
    <text x="325" y="595" text-anchor="middle" fill="#0c5460" font-size="11">Balanced Performance</text>
    
    <rect x="420" y="560" width="150" height="50" fill="#ffeaa7" stroke="#fdcb6e" rx="4"/>
    <text x="495" y="580" text-anchor="middle" fill="#856404" font-size="12" font-weight="bold">Memory Usage</text>
    <text x="495" y="595" text-anchor="middle" fill="#856404" font-size="11">Lightweight Models</text>
    
    <rect x="590" y="560" width="150" height="50" fill="#e2e3e5" stroke="#6c757d" rx="4"/>
    <text x="665" y="580" text-anchor="middle" fill="#383d41" font-size="12" font-weight="bold">Data Privacy</text>
    <text x="665" y="595" text-anchor="middle" fill="#383d41" font-size="11">Local Processing</text>
    
    <rect x="760" y="560" width="150" height="50" fill="#f8d7da" stroke="#dc3545" rx="4"/>
    <text x="835" y="580" text-anchor="middle" fill="#721c24" font-size="12" font-weight="bold">Cross-Validation</text>
    <text x="835" y="595" text-anchor="middle" fill="#721c24" font-size="11">Robust Evaluation</text>
    
    <rect x="930" y="560" width="150" height="50" fill="#d1f2eb" stroke="#20c997" rx="4"/>
    <text x="1005" y="580" text-anchor="middle" fill="#0a3622" font-size="12" font-weight="bold">Class Balance</text>
    <text x="1005" y="595" text-anchor="middle" fill="#0a3622" font-size="11">SMOTE Enhanced</text>
    
    <rect x="1100" y="560" width="150" height="50" fill="#e7e3ff" stroke="#6f42c1" rx="4"/>
    <text x="1175" y="580" text-anchor="middle" fill="#3d1a78" font-size="12" font-weight="bold">Real-time UI</text>
    <text x="1175" y="595" text-anchor="middle" fill="#3d1a78" font-size="11">Interactive Dashboard</text>
  </g>

  <!-- System Flow Arrows -->
  <!-- Step 1 to Step 2 -->
  <line x1="250" y1="260" x2="300" y2="260" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Step 2 to Data Storage -->
  <line x1="480" y1="260" x2="520" y2="260" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Data Storage to Model Training -->
  <path d="M 590 300 L 590 320 L 190 320 L 190 340" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)" fill="none"/>
  
  <!-- Model Training to Model Storage -->
  <line x1="330" y1="400" x2="380" y2="400" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Model Storage to Web App -->
  <line x1="520" y1="400" x2="570" y2="400" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- User Input to Web App -->
  <path d="M 820 340 L 770 340 L 770 380" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)" fill="none"/>
  
  <!-- Web App to Results -->
  <line x1="770" y1="340" x2="1070" y2="340" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Data Flow Labels -->
  <text x="275" y="250" text-anchor="middle" fill="#495057" font-size="10" font-weight="bold">CSV Data</text>
  <text x="500" y="250" text-anchor="middle" fill="#495057" font-size="10" font-weight="bold">Balanced</text>
  <text x="355" y="390" text-anchor="middle" fill="#495057" font-size="10" font-weight="bold">Models</text>
  <text x="545" y="390" text-anchor="middle" fill="#495057" font-size="10" font-weight="bold">Load</text>
  <text x="795" y="330" text-anchor="middle" fill="#495057" font-size="10" font-weight="bold">Input</text>
  <text x="945" y="330" text-anchor="middle" fill="#495057" font-size="10" font-weight="bold">Results</text>

  <!-- Data Flow Steps Numbers -->
  <circle cx="70" cy="240" r="15" fill="#28a745" stroke="#fff" stroke-width="2"/>
  <text x="70" y="246" text-anchor="middle" fill="white" font-size="12" font-weight="bold">1</text>
  
  <circle cx="320" cy="240" r="15" fill="#007bff" stroke="#fff" stroke-width="2"/>
  <text x="320" y="246" text-anchor="middle" fill="white" font-size="12" font-weight="bold">2</text>
  
  <circle cx="70" cy="360" r="15" fill="#6f42c1" stroke="#fff" stroke-width="2"/>
  <text x="70" y="366" text-anchor="middle" fill="white" font-size="12" font-weight="bold">3</text>
  
  <circle cx="590" cy="360" r="15" fill="#007bff" stroke="#fff" stroke-width="2"/>
  <text x="590" y="366" text-anchor="middle" fill="white" font-size="12" font-weight="bold">4</text>
  
  <circle cx="1090" cy="240" r="15" fill="#fd7e14" stroke="#fff" stroke-width="2"/>
  <text x="1090" y="246" text-anchor="middle" fill="white" font-size="12" font-weight="bold">5</text>

  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="650" width="1300" height="160" fill="#fff" stroke="#dee2e6" stroke-width="2" rx="8"/>
    <text x="700" y="675" text-anchor="middle" fill="#495057" font-size="16" font-weight="bold">System Architecture Legend</text>
    
    <!-- Legend items -->
    <rect x="80" y="690" width="20" height="15" fill="url(#inputGradient)"/>
    <text x="110" y="702" fill="#495057" font-size="12">Input/Data Sources</text>
    
    <rect x="250" y="690" width="20" height="15" fill="url(#processGradient)"/>
    <text x="280" y="702" fill="#495057" font-size="12">Processing Steps</text>
    
    <rect x="420" y="690" width="20" height="15" fill="url(#modelGradient)"/>
    <text x="450" y="702" fill="#495057" font-size="12">ML Models</text>
    
    <rect x="580" y="690" width="20" height="15" fill="url(#outputGradient)"/>
    <text x="610" y="702" fill="#495057" font-size="12">Output/Results</text>
    
    <rect x="750" y="690" width="20" height="15" fill="#fff" stroke="#6c757d"/>
    <text x="780" y="702" fill="#495057" font-size="12">Storage/Persistence</text>
    
    <!-- Architecture Notes -->
    <text x="80" y="730" fill="#495057" font-size="12" font-weight="bold">Architecture Highlights:</text>
    <text x="80" y="750" fill="#6c757d" font-size="11">• Dual ML model comparison (Logistic Regression vs Random Forest)</text>
    <text x="80" y="765" fill="#6c757d" font-size="11">• SMOTE-based class balancing for improved model fairness</text>
    <text x="80" y="780" fill="#6c757d" font-size="11">• Real-time Streamlit web interface with interactive parameter controls</text>
    <text x="80" y="795" fill="#6c757d" font-size="11">• Local processing ensures data privacy and security compliance</text>
  </g>

  <!-- Footer -->
  <text x="700" y="870" text-anchor="middle" fill="#6c757d" font-size="12" font-style="italic">
    Medical Diagnosis ML Project - Educational Purpose Only | Not for Clinical Use
  </text>
</svg>
